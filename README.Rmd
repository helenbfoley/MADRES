---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# MADRES

<!-- badges: start -->
<!-- badges: end -->

The MADRES package is a small suite of helper functions for working with data from the MADRES Center at USC. 

The Maternal And Developmental Risks from Environmental and Social Stressors (MADRES) Center aims to understand the impact of environmental exposures and social stressors on the health of mothers and their children, and particularly how these exposures contribute to health disparities. Since its inception in 2015, the MADRES Center has recruited a cohort of over 900 women during pregnancy from four community health centers in Los Angeles. The majority of MADRES Study participants are Hispanic and report annual household incomes of less than $50,000. The study follows the women and children through the childâ€™s fifth birthday. Key maternal health outcomes include pregnancy weight gain, as well as postpartum weight retention, depression, and cardiovascular disease risk in the years after birth. Key child health outcomes include early childhood obesity, respiratory health including asthma, neurodevelopment, and overall health.

If you're interested in our work, please check out our research at [madres.usc.edu](madres.usc.edu). 

## Installation

You can install the development version of MADRES from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("helenbfoley/MADRES")
```

## Example

We can use these helper functions to investigate the number of participants contributing to our biosample repository, who fit certain criteria. Suppose we are sending out some maternal whole blood samples to look at levels of metals. Our criteria are: 

* Maternal whole blood samples
* From the late-pregnancy visit (approx 3rd trimester)

```{r example}
library(MADRES)

#Look at the data provided: simulated labtracking data
head(simul_labtrack)

#look at a few of the attributes of our data: 
table(simul_labtrack$time)
table(simul_labtrack$SAMPLE_TYPE)


#Filter the data by our criteria. Using a longer form and dplyr to make this easy to read. 
library(dplyr)

simul_labtrack %>% filter(SAMPLE_TYPE=="Blue - Top Whole Blood") %>% 
  filter(time=="Third Trimester") ->WB_candidates

#Count how many participants we have here, and see how many are maternal samples. 
CountuniqueIDs(WB_candidates$ID)
CountuniqueMothers(WB_candidates$ID)
```


We see that there are three participants in this mini labtracking dataset fitting our criteria, and that all of them are maternal samples. 

There are lots of applications for these helper functions when setting up biosample datasets, as well as among the demographic and other data in MADRES. If you have requests for new functions or code snippets you find yourself copying all the time, reach out and we can add it to this package. 

Thanks for checking out MADRES!
Helen Foley
